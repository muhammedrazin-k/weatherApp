<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--tailwind css-->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!--bootstrap cdn-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />



    <!--font awsome cdn-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- google fonts-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&family=Dancing+Script:wght@400..700&family=Exo+2:ital,wght@0,100..900;1,100..900&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Orbitron:wght@400..900&family=Playfair:ital,opsz,wght@0,5..1200,300..900;1,5..1200,300..900&family=Roboto:ital,wght@0,100..900;1,100..900&family=Zen+Dots&display=swap"
      rel="stylesheet"
    />

    <!--lottie files-->

    <script
      src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
      type="module"
    ></script>

    <style>
      * {
        box-sizing: border-box;
        font-family: Zen Dots;
        scroll-behavior: smooth;
      }
    </style>
    <title>Weather Q</title>
  </head>
  <body>
    <div
      class="container-fluid bg-dark d-flex justify-content-center align-items-center bg-gradient-to-b from-indigo-950 to-fuchsia-900"
      style="min-height: 100vh"
    >
      <!-- <div class="row w-75" >
        <div class="col-12 col-md-6 d-flex flex-column rounded"      >
            <div class="weather-card " >
            <dotlottie-player
            src="https://lottie.host/634fe526-cdfd-4446-8705-bd941e8f2fb8/pnHaPPh8OK.lottie"
            background="transparent;"
            speed="1"
            style="width: 100%; height: 400px"
            loop
            autoplay
          ></dotlottie-player>
          <div class="p-1">
          <input type="text" class="form-control " placeholder="Enter a Country Name" id="country" oninput="getData()">
        </div>
          </div>
        </div>
        <div class="col-12 col-md-6 " id="display">
            
        </div>
       </div> -->

      <div
        id="logo"
        class="front-content opacity-100 transition-opacity duration-700 ease-in-out"
      >

      
        <dotlottie-player
          src="https://lottie.host/58f6d470-672f-4485-a158-f88e382ff9f9/HEF63yuA5u.lottie"
          background="transparent"
          speed="1"
          class="w-65 sm:w-80 md:w-96 lg:w-[400px] "
          loop
          autoplay
        ></dotlottie-player>
      

        <div class="welcome-tag">
          <h1
            class="text-center text-3xl sm:text-5xl lg:text-6xl font-bold text-white leading-none animate-pulse"
          >
            Weather <br />
            <span
              class="text-yellow-600 text-2xl sm:text-3xl lg:text-4xl text-center d-block -mt-4 lg:-mt-6"
              style="font-family: Dancing Script"
              >Forecasts</span
            >
          </h1>
          <div class="text-center mt-4">
            <button
              class="bg-yellow-500 text-white px-6 md:px-10 py-2 rounded-full hover:bg-gradient-to-r from-yellow-600 to-red-400 hover"
              onclick="show()"
            >
              Get Start
            </button>
          </div>
        </div>
      </div>

      <div
        id="slidebar"
        class="fixed d-flex flex-column bg-white p-10 top-0 w-full h-full left-[-160%] overflow-hidden z-50 transition-all duration-1000 ease-in-out bg-gradient-to-b from-blue-950 to-sky-400"
      >
        <input
          type="text"
          oninput="getData()"
          id="inputdata"
          placeholder="Enter a City Name"
          class="search rounded-full w-full sm:w-[400px] md:w-[600px] lg:w-[800px] px-10 py-2 border border-grey-300 focus:outline-none focus:ring-2 focus:ring-red-800 mx-auto z-2"
        />

        <div
          class="content z-10 d-flex flex-column transition-opacity duration-500 opacity-100"
          id="display"
        >
          <div id="weatherLogo" class="weather-logo d-flex justify-center z-10">
            <dotlottie-player
              src="https://lottie.host/08ba3d42-7dbc-4944-917a-ea7c81ed1645/kGG1c5hP63.lottie"
              background="transparent"
              speed="1"
              class="w-[300px] sm:w-80 md:w-[350px] lg:w-[350px]"
              loop
              autoplay
            ></dotlottie-player>
          </div>
          <div
            id="weatherText"
            class="text-center -mt-20 sm:-mt-[120px] md:-mt-[150px] lg:-mt-[130px] text-white"
          >
            <h1 class="text-5xl sm:text-6xl text-white">27°C</h1>
            <p>Precipitations</p>
            <div class="max-min d-flex justify-between m-auto w-[200px]">
              <p>max:29c</p>
              <p>min:20c</p>
            </div>
          </div>

          <div
            class="weatherBox mt-4 px-0 sm:px-10 text-white py-3 mx-auto w-full sm:w-fit"
          >
            <div class="date d-flex text-center justify-between px-10">
              <p>Today</p>
              <p>Date</p>
            </div>

            <div class="card-div d-flex mt-3 justify-center text-sm sm:text-lg">
              <div
                class="p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400"
              >
                <h3 class="text-center">19°C</h3>
                <img
                  src="https://openweathermap.org/img/wn/04d@2x.png"
                  alt="weather icon"
                  class="w-[80px]"
                />
                <h3 class="text-center">15:00</h3>
              </div>
              <div
                class="p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400"
              >
                <h3 class="text-center">19°C</h3>
                <img
                  src="https://openweathermap.org/img/wn/04d@2x.png"
                  alt="weather icon"
                  class="w-[80px]"
                />
                <h3 class="text-center">15:00</h3>
              </div>
              <div
                class="p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400"
              >
                <h3 class="text-center">19°C</h3>
                <img
                  src="https://openweathermap.org/img/wn/04d@2x.png"
                  alt="weather icon"
                  class="w-[80px]"
                />
                <h3 class="text-center">15:00</h3>
              </div>
              <div
                class="p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400"
              >
                <h3 class="text-center">19°C</h3>
                <img
                  src="https://openweathermap.org/img/wn/04d@2x.png"
                  alt="weather icon"
                  class="w-[80px]"
                />
                <h3 class="text-center">15:00</h3>
              </div>
            </div>
          </div>
        </div>

        <div
          class="lottie-background absolute top-[-10px] right-[-160px] md:top-[-20px] md:right-[50px] z-0"
        >
          <dotlottie-player
            src="https://lottie.host/b05838f0-30ea-448a-9f1d-43817d618b7b/3zyxRkon0X.lottie"
            background="transparent"
            speed="1"
            style="width: 500px; height: 300px"
            loop
            autoplay
          ></dotlottie-player>
        </div>
        <div
          class="lottie-background absolute top-[350px] left-[60px] md:top-[350px] md:left-[10px] lg:top-[350px] xl:top-[430px] z-0"
          style="filter: drop-shadow(15px 15px 15px rgba(0, 0, 0, 0.9))"
        >
          <dotlottie-player
            src="https://lottie.host/3cd553bd-a136-4b00-9ec0-086814df57fd/bvwiHpXO86.lottie"
            background="transparent"
            speed="1"
            style="width: 500px; height: 400px"
            class=""
            loop
            autoplay
          ></dotlottie-player>
        </div>
        <div
          class="lottie-background absolute top-[50px] right-[50px] md:top-[50px] md:right-[30px] lg:top-[50px] xl:top-[30px] z-0"
          style="filter: drop-shadow(15px 15px 15px rgba(0, 0, 0, 0.9))"
        >
        <dotlottie-player
        src="https://lottie.host/b0beade3-d989-4eab-9296-2f30496e9e02/Byt5Z3OqJh.lottie"
        background="transparent"
        speed="1"
        style="width: 200px; height: 200px; opacity: 50%;"
        loop
        autoplay
      ></dotlottie-player>
        </div>
      </div>
    </div>
  </body>
  <script>
    const show = () => {
      document.getElementById("logo").classList.remove("opacity-100");
      document.getElementById("logo").classList.add("opacity-0");
      setTimeout(() => {
        document.getElementById("slidebar").classList.remove("left-[-100%]");
        document.getElementById("slidebar").classList.add("left-[0]");
      }, 700);
    };

    let timer;

    const getData = async () => {
      try {
        if (inputdata.value.length == 0) return;
        if (inputdata.value) {
          const data = inputdata.value;

          document.getElementById("display").innerHTML = `
          <div class="mx-auto mt-32">
          

          <div class="flex items-center justify-center w-56 h-56 rounded-lg bg-transparent dark:bg-gray-800 dark:border-gray-700">
          <div class="px-3 py-1 text-md font-medium leading-none text-center text-blue-800 bg-blue-200 rounded-full animate-pulse dark:bg-blue-900 dark:text-blue-200">loading...</div>
          </div>
  
          </div>
          `;
          //Debouncing

          clearTimeout(timer);

          display.classList.remove("opacity-100");
          // display.classList.add("opacity-0");

          timer = setTimeout(async () => {
            try {
              const res = await fetch(
                `https://api.openweathermap.org/data/2.5/forecast?q=${data}&appid=5b4bee0ba241d092159faf007e166080&units=metric`
              );
              const result = await res.json();
              console.log(result);

              if (result.cod == 404) {
                document.getElementById("display").classList.add("opacity-100");
                document.getElementById(
                  "display"
                ).innerHTML = `<div class="mx-auto text-red-500 text-2xl mt-32"> 
                  
              <a href="#" class="block max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow-sm hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:hover:bg-gray-700">

                <h5 class="mb-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white text-center text-red-500">${result.message}...!</h5>
                <p class="font-normal text-gray-700 dark:text-gray-400 text-center">Enter a valid city Name for checking your Weather forcast</p>
              </a>

                  </div>`;
                return;
              }
              //get current time to match with current climate

              const time = new Date();

              const currentversion = result.list.filter((data) => {
                if (new Date(data.dt * 1000).getHours() >= time.getHours()) {
                  return data;
                }
              });

              currentWeather = currentversion[0];
              console.log(currentWeather);

              //taking data from fetch result
              const weatherTemp = Math.floor(currentWeather.main.temp);
              const maxTemp = Math.floor(currentWeather.main.temp_max);
              const minTemp = Math.floor(currentWeather.main.temp_min);
              const weatherDes = currentWeather.weather[0].description;
              const weatherType = currentWeather.weather[0].main;
              const date = new Date(
                currentWeather.dt * 1000
              ).toLocaleDateString();
              const city = data;

              //card data

              const currentcardtemp = Math.floor(currentversion[0].main.temp);
              const firstcardtemp =
                Math.floor(currentversion[1]?.main.temp) ||
                Math.floor(currentversion[0].main.temp);
              const secondcardtemp =
                Math.floor(currentversion[2]?.main.temp) ||
                Math.floor(currentversion[0].main.temp);
              const thirdcardtemp =
                Math.floor(currentversion[3]?.main.temp) ||
                Math.floor(currentversion[0].main.temp);
              //clouds
              const currentcloud = currentversion[0].weather[0].icon;
              const firstcloud =
                currentversion[1]?.weather[0].icon ||
                currentversion[0].weather[0].icon;
              const secondcloud =
                currentversion[2]?.weather[0].icon ||
                currentversion[0].weather[0].icon;
              const thirdcloud =
                currentversion[3]?.weather[0].icon ||
                currentversion[0].weather[0].icon;

              //weather data

              const basesky = currentversion[0].weather[0].main;
              const firstsky =
                currentversion[1]?.weather[0].main ||
                currentversion[0].weather[0].main;
              const secondsky =
                currentversion[2]?.weather[0].main ||
                currentversion[0].weather[0].main;
              const thirdsky =
                currentversion[3]?.weather[0].main ||
                currentversion[0].weather[0].main;

              //utc
              const baseDate = new Date(currentversion[0].dt * 1000);
              const firstDate = new Date(
                baseDate.getTime() + 3 * 60 * 60 * 1000
              );
              const secondDate = new Date(
                firstDate.getTime() + 3 * 60 * 60 * 1000
              );
              const thirdDate = new Date(
                secondDate.getTime() + 3 * 60 * 60 * 1000
              );

              // Now format all of them
              const currentTimeStr = baseDate.toLocaleTimeString("en-IN", {
                hour: "2-digit",
                minute: "2-digit",
                hour12: true,
              });
              const firstTimeStr = firstDate.toLocaleTimeString("en-IN", {
                hour: "2-digit",
                minute: "2-digit",
                hour12: true,
              });
              const secondTimeStr = secondDate.toLocaleTimeString("en-IN", {
                hour: "2-digit",
                minute: "2-digit",
                hour12: true,
              });
              const thirdTimeStr = thirdDate.toLocaleTimeString("en-IN", {
                hour: "2-digit",
                minute: "2-digit",
                hour12: true,
              });

              //Replacing view data

              document.getElementById("display").innerHTML = `
             <div id="weatherLogo" class="weather-logo d-flex justify-center z-10 ">
            <dotlottie-player
              src="https://lottie.host/08ba3d42-7dbc-4944-917a-ea7c81ed1645/kGG1c5hP63.lottie"
              background="transparent"
              speed="1"
              class="w-[300px] sm:w-80 md:w-[350px] lg:w-[350px]"
              loop
              autoplay
            ></dotlottie-player>
          </div>
          <div id="weatherText" class="text-center -mt-20 sm:-mt-[120px] md:-mt-[150px] lg:-mt-[130px] text-white ">
            <h1 class="text-5xl sm:text-6xl text-white">${weatherTemp}°C</h1>
            <p>${weatherDes}</p>
            <div class="max-min d-flex justify-between m-auto w-[200px]">
              <p>max:${maxTemp}°C</p>
              <p>min:${minTemp}°C</p>
            </div>
          </div>

          <div class="weatherBox  mt-4 px-0 sm:px-10 text-white  py-3 mx-auto w-full sm:w-fit" >
            <div class="date d-flex text-center justify-between px-10">
              <p>Today</p>
             
              <p>${date}</p>
            </div>

            <div class="card-div d-flex mt-3 justify-center text-sm sm:text-lg">
              <div class="  p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400 " >
                <h3 class="text-center">${currentcardtemp}°C</h3>
              <img src="https://openweathermap.org/img/wn/${currentcloud}@2x.png" alt="weather icon" class="w-[80px]">
                <p class="text-center">${basesky}</p>
              <h3 class="text-center">${currentTimeStr}</h3>
              </div>
              <div class=" p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400">
                <h3 class="text-center">${firstcardtemp}°C</h3>
              <img src="https://openweathermap.org/img/wn/${firstcloud}@2x.png" alt="weather icon" class="w-[80px]">
              <p class="text-center">${firstsky}</p>
              <h3 class="text-center">${firstTimeStr}</h3>
              </div>
              <div class=" p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400">
                <h3 class="text-center">${secondcardtemp}°C</h3>
                <img src="https://openweathermap.org/img/wn/${secondcloud}@2x.png" alt="weather icon" class="w-[80px]">
                <p class="text-center">${secondsky}</p>
                <h3 class="text-center">${secondTimeStr}</h3>
              </div>
              <div class=" p-2 mx-1 shadow-[0_4px_20px_rgba(0,0,0,0.9)] bg-gradient-to-t from-blue-900 to-sky-400">
                <h3 class="text-center ">${thirdcardtemp}°C</h3>
              <img src="https://openweathermap.org/img/wn/${thirdcloud}@2x.png" alt="weather icon" class="w-[80px]">
              <p class="text-center">${thirdsky}</p>
              <h3 class="text-center">${thirdTimeStr}</h3>
              </div>
            </div>
          </div>
            `;

              document.getElementById("display").classList.add("opacity-100");
            } catch (err) {
              document.getElementById("display").classList.remove("opacity-0");
              document.getElementById("display").classList.add("opacity-100");
              document.getElementById(
                "display"
              ).innerHTML = `<p class="text-center text-red-500">city:${err.message} </p>`;
            }
          }, 800);

          
        }
      } catch (err) {
        document.getElementById("display").classList.add("opacity-100");
        document.getElementById(
          "display"
        ).innerHTML = `<p class="text-center">city:${err.message} </p>`;
      }
    };
  </script>
</html>
